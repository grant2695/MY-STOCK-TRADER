(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{46:function(e,t,a){e.exports=a(82)},51:function(e,t,a){},70:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),s=a.n(o),c=(a(51),a(4)),l=a(5),i=a(7),u=a(6),p=a(8),m=a(3),d=a(20),h=a(25),b=a.n(h),f=a(9),y=a.n(f),v=function(e){e?y.a.defaults.headers.common.Authorization=e:delete y.a.defaults.headers.common.Authorization},g=function(e){return{type:"SET_CURRENT_USER",payload:e}},E=function(){return function(e){localStorage.removeItem("jwtToken"),v(!1),e(g({}))}},w=(a(70),a(12)),O=a(19),k=a(43),S=a(16);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach(function(t){Object(S.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var x=a(75),R={isAuthenticated:!1,user:{},loading:!1};function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach(function(t){Object(S.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var D={user:{},loading:!1},P={},_=Object(O.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return console.log("SET CURRENT USER"),N({},e,{isAuthenticated:!x(t.payload),user:t.payload});case"USER_LOADING":return N({},e,{loading:!0});default:return e}},stock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BUY_STOCK":case"SELL_STOCK":case"UPDATE_STOCKS":return C({},e,{user:t.payload});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}}}),U=[k.a],q=Object(O.e)(_,{},Object(O.d)(O.a.apply(void 0,U))),A=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-dark",style:{background:"white",padding:"7px"}},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(m.b,{className:"black-text",to:"/",style:{fontFamily:"monospace"}},"Virtual Stock Trading")),r.a.createElement("li",null,r.a.createElement(m.b,{className:"col s3 black-text ",to:"/Dashboard",style:{color:"grey",fontFamily:"monospace",fontWeight:"bold",padding:"16dp"}},"Portfolio")),r.a.createElement("li",null,r.a.createElement(m.b,{className:"col s3 black-text ",to:"/History",style:{color:"grey",fontFamily:"monospace",fontWeight:"bold",padding:"16dp"}},"Transactions"))))}}]),t}(n.Component),L=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{height:"75vh"},className:"container valign-wrapper"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 center-align"},r.a.createElement("h4",null,r.a.createElement("b",null,"Trade Stocks")," with this "," ",r.a.createElement("span",{style:{fontFamily:"monospace"}},"Stock Trading Web App"),"!"),r.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Trade stocks on this minimal platform!"),r.a.createElement("br",null),r.a.createElement("div",{className:"col s6"},r.a.createElement(m.b,{to:"/register",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Register")),r.a.createElement("div",{className:"col s6"},r.a.createElement(m.b,{to:"/login",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large btn-flat waves-effect white black-text"},"Login")))))}}]),t}(n.Component),I=a(14),F=a.n(I),B=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).onChange=function(t){e.setState(Object(S.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={name:e.state.name,email:e.state.email,password:e.state.password,password2:e.state.password2};console.log(a),e.props.registerUser(a,e.props.history)},e.state={name:"",email:"",password:"",password2:"",errors:{}},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8 offset-s2"},r.a.createElement(m.b,{to:"/",className:"btn-flat waves-effect"},r.a.createElement("i",{className:"material-icons left"},"keyboard_backspace")," Back to home"),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("h4",null,r.a.createElement("b",null,"Register")," below"),r.a.createElement("p",{className:"grey-text text-darken-1"},"Already have an account? ",r.a.createElement(m.b,{to:"/login"},"Log in"))),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.name,error:e.name,id:"name",type:"text",className:F()("",{invalid:e.name})}),r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("span",{className:"red-text"},e.name)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:F()("",{invalid:e.email})}),r.a.createElement("span",{className:"red-text"},e.email),r.a.createElement("label",{htmlFor:"email"},"Email")),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:F()("",{invalid:e.password})}),r.a.createElement("span",{className:"red-text"},e.password),r.a.createElement("label",{htmlFor:"password"},"Password")),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.password2,error:e.password2,id:"password2",type:"password",className:F()("",{invalid:e.password2})}),r.a.createElement("label",{htmlFor:"password2"},"Confirm Password"),r.a.createElement("span",{className:"red-text"},e.password2)),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Sign up"))))))}}]),t}(n.Component),K=Object(w.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(a){y.a.post("/api/users/register",e).then(function(e){return t.push("/login")}).catch(function(e){return a({type:"GET_ERRORS",payload:e.response.data})})}}})(Object(d.g)(B)),W=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).onChange=function(t){e.setState(Object(S.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a)},e.state={email:"",password:"",errors:{}},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{style:{marginTop:"4rem"},className:"row"},r.a.createElement("div",{className:"col s8 offset-s2"},r.a.createElement(m.b,{to:"/",className:"btn-flat waves-effect"},r.a.createElement("i",{className:"material-icons left"},"keyboard_backspace")," Back to home"),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("h4",null,r.a.createElement("b",null,"Login")," below"),r.a.createElement("p",{className:"grey-text text-darken-1"},"Don't have an account? ",r.a.createElement(m.b,{to:"/register"},"Register"))),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:F()("",{invalid:e.email||e.emailnotfound})}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("span",{className:"red-text"},e.email,e.emailnotfound)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:F()("",{invalid:e.password||e.passwordincorrect})}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("span",{className:"red-text"},e.password,e.passwordincorrect)),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Login"))))))}}]),t}(n.Component),V=Object(w.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e){return function(t){y.a.post("/api/users/login",e).then(function(e){var a=e.data.token;console.log(e.data),localStorage.setItem("jwtToken",a),v(a);var n=b()(a,{complete:!0});console.log(n),t(g(n))}).catch(function(e){return t({type:"GET_ERRORS",payload:e.response.data})})}}})(W),G=a(45),M=a(21),Y=a.n(M),$=a(26),J="https://www.alphavantage.co/query?",z="function=TIME_SERIES_DAILY&symbol=",H="",Q="&apikey=Y6422ENO6XKRARUY",X=function(e){return{type:"BUY_STOCK",payload:e}},Z=function(e){return{type:"SELL_STOCK",payload:e}},ee=function(e){return{type:"UPDATE_STOCKS",payload:e}};a(78);function te(e){var t=e.symbol,a=e.shares,n=e.currentValue,o=e.openValue,s="";return s=n>o?"green":n<o?"red":"grey",r.a.createElement("li",{style:{color:s}},t," - ",a," shares (",n*a,")")}var ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onLogoutClick=function(e){e.preventDefault(),a.props.logoutUser()},a.onUpdateClick=function(e){e.preventDefault();var t="";t=a.props.stock.user.data?a.props.stock.user.data:a.props.auth.user,a.props.updateStocks(t);var n=a.props.stock.user.data;n&&(a.props.auth.user=n,a.setState({portfolio:n.ownedStocks}))},a.processRequest=function(){var e=Object($.a)(Y.a.mark(function e(t,a,n){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){var o=n(t,a);setTimeout(function(){e(o)},5e3)}).then(function(e){return e}));case 1:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onBuyClick=function(){var e=Object($.a)(Y.a.mark(function e(t){var n,r,o;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={symbol:a.state.symbol,quantity:a.state.quantity},r="",r=a.props.stock.user.data?a.props.stock.user.data:a.props.auth.user,e.next=6,a.processRequest(r,n,a.props.buyStock);case 6:(o=a.props.stock.user.data)&&(a.props.auth.user=o,a.setState({balance:o.balance,portfolio:o.ownedStocks}));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onSellClick=function(){var e=Object($.a)(Y.a.mark(function e(t){var n,r,o;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={symbol:a.state.symbol,quantity:a.state.quantity},r="",r=a.props.stock.user.data?a.props.stock.user.data:a.props.auth.user,e.next=6,a.processRequest(r,n,a.props.sellStock);case 6:(o=a.props.stock.user.data)&&(a.props.auth.user=o,a.setState({balance:o.balance,portfolio:o.ownedStocks}));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onChange=function(e){a.setState(Object(S.a)({},e.target.id,e.target.value))},a.state={symbol:"",quantity:"",balance:a.props.auth.user.balance,portfolio:a.props.auth.user.ownedStocks,errors:{}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.auth.user;this.setState({balance:e.balance,portfolio:e.ownedStocks})}},{key:"render",value:function(){var e=this.state.errors,t=void 0,a=0;return t=null!=this.state.portfolio?this.state.portfolio.map(function(e,t){return a+=e.quantity*e.unit_price,r.a.createElement(te,{symbol:e.symbol,shares:e.quantity,currentValue:e.unit_price,openValue:e.open_price,key:t})}):"No stocks owned yet.",r.a.createElement("div",{style:{height:"75vh"},className:"container valign-wrapper"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6 center-align"},r.a.createElement("h4",null,r.a.createElement("b",null,"Portfolio($",a,")")),r.a.createElement("ul",null,t)),r.a.createElement("div",{className:"col s6 center-align"},r.a.createElement("h4",null,"Cash: ($",this.state.balance,")"),r.a.createElement("input",{onChange:this.onChange,value:this.state.symbol,error:e.symbol,id:"symbol",type:"text",placeholder:"Ticker Symbol",className:F()("",{invalid:e.symbol})}),r.a.createElement("input",{onChange:this.onChange,value:this.state.quantity,error:e.quantity,id:"quantity",type:"text",placeholder:"Quantity",className:F()("",{invalid:e.quantity})}),r.a.createElement("button",{style:{width:"100px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem",marginRight:"2px"},onClick:this.onBuyClick,className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Buy"),r.a.createElement("button",{style:{width:"100px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem",marginRight:"2px"},onClick:this.onSellClick,className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Sell"),r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem",marginRight:"2px"},onClick:this.onUpdateClick,className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Update Prices"),r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:this.onLogoutClick,className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Logout"))))}}]),t}(n.Component),ne=Object(w.b)(function(e){return{auth:e.auth,stock:e.stock}},{logoutUser:E,buyStock:function(e,t){return function(a){y.a.post("/api/users/stockRequest",t).then(function(e){return console.log("POST REQUEST"),H=t.symbol,y.a.get(J+z+H+Q)}).then(function(n){if(!n.data)throw"Improper symbol";console.log("POST API CALL");var r=n.data["Time Series (Daily)"];console.log("POST OBJ");var o=Object.keys(r)[0];console.log("POST DATESTR");var s=n.data["Time Series (Daily)"][o];if(!s)throw console.log("WHOOPS"),"STOCK INFO ERROR";console.log("UD: "+e);var c={userId:e.id,symbol:H,quantity:t.quantity,stockInfo:s};console.log("tD userID: "+c.userId),console.log("BEFORE buyStock"),y.a.post("/api/users/buyStock",c).then(function(e){console.log("Returning Purchase"),console.log("response: "+e),a(X(e))})}).catch(function(e){return a({type:"GET_ERRORS",payload:e})})}},sellStock:function(e,t){return function(a){y.a.post("/api/users/stockRequest",t).then(function(e){return H=t.symbol,y.a.get(J+z+H+Q)}).then(function(n){var r=n.data["Time Series (Daily)"],o=Object.keys(r)[0],s=n.data["Time Series (Daily)"][o];if(!s)throw"STOCK INFO ERROR";var c={userId:e.id,symbol:H,quantity:t.quantity,stockInfo:s};y.a.post("/api/users/sellStock",c).then(function(e){a(Z(e))})}).catch(function(e){return a({type:"GET_ERRORS",payload:e})})}},updateStocks:function(e){return function(t){var a={id:e.id};y.a.post("/api/users/updateStocks",a).then(function(e){t(ee(e))})}}})(ae),re=Object(w.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(G.a)(e,["component","auth"]);return r.a.createElement(d.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(d.a,{to:"/login"})}}))});function oe(e){var t=e.date,a=e.t_type,n=e.symbol,o=e.shares,s=e.price,c="";return c="BUY"===a?"-":"+",r.a.createElement("li",null,t," - ",a," ",n," - ",o," shares (",c,"$",s*o,")")}var se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={transactions:a.props.auth.user.transactions,errors:{}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.auth.user;console.log("CDM USER: "+e),this.setState({transactions:e.transactions})}},{key:"render",value:function(){console.log("STATE: "+this.state),console.log("PROPS: "+this.props.auth);this.props.auth.user;var e=void 0;return e=null!=this.state.transactions?this.state.transactions.map(function(e,t){console.log(e);var a=new Date(e.date).toDateString();return r.a.createElement(oe,{date:a,t_type:e.transaction_type,symbol:e.symbol,shares:e.stock_quantity,price:e.stock_price,key:t})}):"No transactions made yet.",r.a.createElement("div",{style:{height:"75vh"},className:"container valign-wrapper"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 center-align"},r.a.createElement("h3",null,"Transaction Record"),r.a.createElement("ul",null,e))))}}]),t}(n.Component),ce=Object(w.b)(function(e){return{auth:e.auth,stock:e.stock}},{})(se);if(localStorage.jwtToken){var le=localStorage.jwtToken;v(le);var ie=b()(le);q.dispatch(g(ie));var ue=Date.now()/1e3;ie.exp<ue&&(q.dispatch(E()),window.location.href="./login")}var pe=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(w.a,{store:q},r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(A,null),r.a.createElement(d.b,{exact:!0,path:"/",component:L}),r.a.createElement(d.b,{exact:!0,path:"/register",component:K}),r.a.createElement(d.b,{exact:!0,path:"/login",component:V}),r.a.createElement(d.d,null,r.a.createElement(re,{exact:!0,path:"/dashboard",component:ne}),r.a.createElement(re,{exact:!0,path:"/history",component:ce})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[46,1,2]]]);
//# sourceMappingURL=main.bb86d6f8.chunk.js.map